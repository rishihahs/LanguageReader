define(["jquery","read/WordReference","templates/spanish.template"],function(e,t,n){function i(s){t.getJSON(s,function(o){var u;if(o.hasOwnProperty("Error"))u="No translation found.";else{var a=o.term0.PrincipalTranslations[0].OriginalTerm.term;if(a!==s){i(a);return}var f=t.semantisizeJSON(o);u=n["spanish.hbs"](f)}r.empty(),r.append("<h1>"+s+"</h1>"),r.append('<p class="clicktoshow">Click to show definition</p>'),r.append('<div class="flashcard-definition">'+u+"</div>");var l=r.clone();e(".flashcard-content").length===0&&l.css("display","block"),e(".flashcards .flow:last").before(l)})}function o(){if(s===0)return;s--,s===0&&e(".flow:first .arrow").addClass("opaque");var t=arguments;e(".flow:last .arrow").removeClass("opaque"),e(".flashcard-content").eq(s+1).fadeOut("fast",function(){e(".flashcard-content").eq(s).show(),typeof t[0]=="function"&&t[0]()})}function u(){var t=e(".flashcard-content").length-1;if(s===t)return;s++,s===t&&e(".flow:last .arrow").addClass("opaque");var n=arguments;e(".flow:first .arrow").removeClass("opaque"),e(".flashcard-content").eq(s-1).fadeOut("fast",function(){e(".flashcard-content").eq(s).show(),typeof n[0]=="function"&&n[0]()})}var r=e(".flashcard-content").remove().clone().css("display","none");e(".create").click(function(){var t=e('.wordsmissed input[type="checkbox"]:checked').parent();for(var n=0,r=t.length;n<r;n++)i(e.trim(t.eq(n).text()));e(".flashcards").show()}),e(".flashcards").on("click",".flashcard-content",function(){e(this).find(".clicktoshow").hide(),e(this).find(".flashcard-definition").fadeIn("fast")});var s=0;e(".flashcards .flow:first").click(function(){o(function(){e(".clicktoshow").show(),e(".flashcard-definition").hide()})}),e(".flashcards .flow:last").click(function(){u(function(){e(".clicktoshow").show(),e(".flashcard-definition").hide()})})});